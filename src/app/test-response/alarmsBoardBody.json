{
  "result": {
    "layoutId": "580e1ba498601c0f96b7e809",
    "pseudo_fields": [
      {
        "type": "DateTime",
        "pseudo": true,
        "description": "\u0418\u041f \u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",
        "name": "duration_intervals"
      }
    ],
    "layout": {
      "uuid": "f2736f99-a568-4820-b746-1e71d48b4374",
      "cells": [
        {
          "md": 6,
          "name": "c11",
          "lg": null,
          "height": 200,
          "sm": null,
          "xs": null,
          "row": 0
        },
        {
          "md": 6,
          "name": "c12",
          "lg": null,
          "height": 200,
          "sm": null,
          "xs": null,
          "row": 0
        },
        {
          "md": 6,
          "name": "c21",
          "lg": null,
          "height": 200,
          "sm": null,
          "xs": null,
          "row": 1
        },
        {
          "md": 6,
          "name": "c22",
          "lg": null,
          "height": 200,
          "sm": null,
          "xs": null,
          "row": 1
        },
        {
          "md": 6,
          "row": 4,
          "name": "c31",
          "height": 200
        },
        {
          "md": 6,
          "row": 4,
          "name": "c32",
          "height": 200
        },
        {
          "md": 12,
          "row": 10,
          "name": "table1",
          "height": 200
        },
        {
          "md": 12,
          "row": 20,
          "name": "table2",
          "height": 200
        }
      ],
      "description": "",
      "fav_status": false,
      "is_builtin": false,
      "id": "580e1ba498601c0f96b7e809",
      "name": "c2x2"
    },
    "description": "\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043e\u0442\u0447\u0435\u0442\u0430 \u043f\u043e \u0430\u0432\u0430\u0440\u0438\u044f\u043c",
    "title": "\u0410\u0432\u0430\u0440\u0438\u0438 v2",
    "format": 2,
    "export": {
      "params": [
        {
          "fields": [
            {
              "expr": "date",
              "format": "dateToString",
              "group": 0,
              "label": "\u0414\u0430\u0442\u0430"
            },
            {
              "expr": "count()",
              "alias": "qty",
              "label": "\u041a\u043e\u043b-\u0432\u043e"
            },
            {
              "expr": "sum(reboots)",
              "alias": "reboots_sum",
              "label": "\u041a\u043e\u043b-\u0432\u043e \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043e\u043a"
            },
            {
              "expr": {
                "$sum": {
                  "$minus": [
                    {
                      "$field": "close_ts"
                    },
                    {
                      "$field": "ts"
                    }
                  ]
                }
              },
              "alias": "duration_sum",
              "label": "\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"
            }
          ],
          "datasource": "alarms"
        }
      ],
      "id": 0,
      "method": "query"
    },
    "datasource": "alarms",
    "groups": [
      {
        "active": true,
        "association": "$and",
        "filters": [
          {
            "type": "DateTime",
            "association": "$and",
            "values": [
              {
                "value": "l7"
              }
            ],
            "name": "ts",
            "condition": "interval"
          }
        ],
        "name": "startEnd"
      }
    ],
    "filter_fields": [
      {
        "group": 2,
        "name": "administrative_domain"
      },
      {
        "group": 0,
        "name": "alarm_id"
      },
      {
        "group": 0,
        "name": "close_ts"
      },
      {
        "group": 1,
        "name": "container"
      },
      {
        "group": 0,
        "name": "direct_services"
      },
      {
        "group": 0,
        "name": "direct_subscribers"
      },
      {
        "group": 0,
        "name": "escalation_ts"
      },
      {
        "group": 0,
        "name": "escalation_tt"
      },
      {
        "group": 1,
        "name": "managed_object"
      },
      {
        "group": 1,
        "name": "platform"
      },
      {
        "group": 1,
        "name": "profile"
      },
      {
        "group": 0,
        "name": "reopens"
      },
      {
        "group": 1,
        "name": "root"
      },
      {
        "group": 1,
        "name": "segment"
      },
      {
        "group": 0,
        "name": "severity"
      },
      {
        "group": 0,
        "name": "total_objects"
      },
      {
        "group": 0,
        "name": "total_services"
      },
      {
        "group": 0,
        "name": "total_subscribers"
      },
      {
        "group": 1,
        "name": "version"
      },
      {
        "group": 0,
        "name": "x"
      },
      {
        "group": 0,
        "name": "y"
      },
      {
        "group": 0,
        "name": "ts"
      },
      {
        "group": 1,
        "name": "vendor"
      },
      {
        "group": 1,
        "name": "ip"
      },
      {
        "group": 2,
        "name": "pool"
      },
      {
        "group": 0,
        "name": "date"
      },
      {
        "group": 0,
        "name": "duration_intervals"
      },
      {
        "group": 0,
        "name": "duration"
      },
      {
        "group": 0,
        "name": "reboots"
      }
    ],
    "widgets": [
      {
        "cell": "c11",
        "note": "\u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438",
        "title": "\u0410\u0432\u0430\u0440\u0438\u0438 \u043f\u043e \u0412\u0440\u0435\u043c\u0435\u043d\u0438",
        "type": "lineChart",
        "query": {
          "params": [
            {
              "fields": [
                {
                  "expr": "date",
                  "group": 0,
                  "order": 0,
                  "desc": true
                },
                {
                  "expr": "count()",
                  "alias": "cnt"
                }
              ],
              "datasource": "alarms"
            }
          ],
          "id": 0,
          "method": "query"
        }
      },
      {
        "cell": "c21",
        "note": "\u043f\u043e \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0435",
        "title": "\u0413\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0435, \u0442\u043e\u043f 10",
        "type": "pieChart",
        "query": {
          "params": [
            {
              "fields": [
                {
                  "expr": "platform",
                  "group": 0
                },
                {
                  "expr": {
                    "$lookup": [
                      "platform",
                      {
                        "$field": "platform"
                      }
                    ]
                  },
                  "group": 1,
                  "alias": "name"
                },
                {
                  "expr": "count()",
                  "alias": "cnt",
                  "order": 0,
                  "desc": true
                }
              ],
              "limit": 10,
              "datasource": "alarms"
            }
          ],
          "id": 0,
          "method": "query"
        }
      },
      {
        "cell": "c12",
        "note": "\u043f\u043e \u0434\u043d\u044e \u043d\u0435\u0434\u0435\u043b\u0438",
        "title": "\u0410\u0432\u0430\u0440\u0438\u0438 \u043f\u043e \u0434\u043d\u044e \u043d\u0435\u0434\u0435\u043b\u0438",
        "type": "rowChart",
        "query": {
          "params": [
            {
              "fields": [
                {
                  "expr": "toDayOfWeek(date)",
                  "alias": "day",
                  "group": 0,
                  "order": 0,
                  "desc": true
                },
                {
                  "expr": "count()",
                  "alias": "cnt"
                }
              ],
              "datasource": "alarms"
            }
          ],
          "id": 0,
          "method": "query"
        }
      },
      {
        "cell": "c22",
        "note": "\u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438",
        "title": "\u0410\u0432\u0430\u0440\u0438\u0438 \u043f\u043e \u043d\u043e\u043c\u0435\u0440\u0443 \u0447\u0430\u0441\u0430",
        "type": "barChart",
        "query": {
          "params": [
            {
              "fields": [
                {
                  "expr": "toHour(ts)",
                  "alias": "hour",
                  "group": 0,
                  "order": 0,
                  "desc": true
                },
                {
                  "expr": "count()",
                  "alias": "cnt"
                },
                {
                  "expr": "toHour(ts)",
                  "group": 1,
                  "alias": "name"
                }
              ],
              "datasource": "alarms"
            }
          ],
          "id": 0,
          "method": "query"
        }
      },
      {
        "note": "\u043f\u043e \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0443 \u0441\u0435\u0442\u0438",
        "query": {
          "params": [
            {
              "fields": [
                {
                  "expr": "segment",
                  "group": 0
                },
                {
                  "expr": {
                    "$lookup": [
                      "networksegment",
                      {
                        "$field": "segment"
                      }
                    ]
                  },
                  "group": 1,
                  "alias": "name"
                },
                {
                  "expr": "count()",
                  "alias": "cnt",
                  "order": 0,
                  "desc": true
                }
              ],
              "limit": 10,
              "datasource": "alarms"
            }
          ],
          "id": 0,
          "method": "query"
        },
        "cell": "c31",
        "type": "pieChart",
        "title": "\u0413\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0443 \u0441\u0435\u0442\u0438, \u0442\u043e\u043f 10"
      },
      {
        "note": "\u043f\u043e \u0432\u0430\u0436\u043d\u043e\u0441\u0442\u0438",
        "query": {
          "params": [
            {
              "fields": [
                {
                  "expr": {
                    "$lookup": [
                      "profile",
                      {
                        "$field": "profile"
                      }
                    ]
                  },
                  "alias": "profile_text",
                  "label": "\u041f\u0440\u043e\u0444\u0438\u043b\u044c"
                },
                {
                  "expr": {
                    "$lookup": [
                      "vendor",
                      {
                        "$field": "vendor"
                      }
                    ]
                  },
                  "alias": "vendor_text",
                  "label": "\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c"
                },
                {
                  "expr": {
                    "$lookup": [
                      "platform",
                      {
                        "$field": "platform"
                      }
                    ]
                  },
                  "alias": "platform_text",
                  "label": "\u041f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0430"
                },
                {
                  "expr": {
                    "$lookup": [
                      "version",
                      {
                        "$field": "version"
                      }
                    ]
                  },
                  "alias": "version_text",
                  "label": "\u0412\u0435\u0440\u0441\u0438\u044f \u041f\u041e"
                },
                {
                  "expr": "severity",
                  "label": "\u0412\u0430\u0436\u043d\u043e\u0441\u0442\u044c",
                  "alias": "xxx",
                  "order": 0,
                  "desc": true
                }
              ],
              "limit": 10,
              "datasource": "alarms"
            }
          ],
          "id": 0,
          "method": "query"
        },
        "cell": "table2",
        "type": "dataTable",
        "title": "\u041f\u043e \u0432\u0430\u0436\u043d\u043e\u0441\u0442\u0438, \u0442\u043e\u043f 10"
      },
      {
        "cell": "table1",
        "query": {
          "params": [
            {
              "fields": [
                {
                  "expr": "severity",
                  "label": "\u0412\u0430\u0436\u043d\u043e\u0441\u0442\u044c",
                  "alias": "severity"
                },
                {
                  "expr": {
                    "$lookup": [
                      "managedobject",
                      {
                        "$field": "managed_object"
                      }
                    ]
                  },
                  "alias": "managed_object_text",
                  "label": "\u0418\u043c\u044f \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f"
                },
                {
                  "expr": "date",
                  "label": "\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",
                  "format": "dateToString"
                },
                {
                  "expr": "reopens",
                  "label": "\u041a\u043e\u043b-\u0432\u043e \u043f\u0435\u0440\u0435\u043e\u0442\u043a\u0440\u044b\u0442\u0438\u0439"
                },
                {
                  "expr": {
                    "$lookup": [
                      "container",
                      {
                        "$field": "container"
                      }
                    ]
                  },
                  "alias": "container_text",
                  "label": "\u041a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 (\u0410\u0434\u0440\u0435\u0441)"
                },
                {
                  "format": "secondsToString",
                  "expr": {
                    "$minus": [
                      {
                        "$field": "close_ts"
                      },
                      {
                        "$field": "ts"
                      }
                    ]
                  },
                  "label": "\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c (\u0447\u0430\u0441:\u043c\u0438\u043d:\u0441\u0435\u043a)",
                  "alias": "xxx",
                  "order": 0,
                  "desc": true
                }
              ],
              "limit": 20,
              "datasource": "alarms"
            }
          ],
          "id": 0,
          "method": "query"
        },
        "note": "\u043f\u043e \u0434\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438",
        "type": "dataTable",
        "title": "\u041f\u043e \u0434\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0430\u0432\u0430\u0440\u0438\u0438, \u0442\u043e\u043f 20"
      },
      {
        "cell": "c32",
        "query": {
          "params": [
            {
              "fields": [
                {
                  "expr": "profile",
                  "group": 0
                },
                {
                  "expr": {
                    "$lookup": [
                      "profile",
                      {
                        "$field": "profile"
                      }
                    ]
                  },
                  "group": 1,
                  "alias": "name"
                },
                {
                  "expr": "count()",
                  "alias": "cnt",
                  "order": 0,
                  "desc": true
                }
              ],
              "limit": 10,
              "datasource": "alarms"
            }
          ],
          "id": 0,
          "method": "query"
        },
        "note": "\u043f\u043e \u043f\u0440\u043e\u0444\u0438\u043b\u044e",
        "type": "pieChart",
        "title": "\u0413\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e \u043f\u0440\u043e\u0444\u0438\u043b\u044e, \u0442\u043e\u043f 10"
      },
      {
        "cell": "zc22",
        "note": "\u043f\u043e \u043f\u0443\u043b\u0443",
        "title": "\u0413\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e \u043f\u0443\u043b\u0443, \u0442\u043e\u043f 10",
        "type": "pieChart",
        "query": {
          "params": [
            {
              "fields": [
                {
                  "expr": "pool",
                  "group": 0
                },
                {
                  "expr": {
                    "$lookup": [
                      "pool",
                      {
                        "$field": "pool"
                      }
                    ]
                  },
                  "alias": "name"
                },
                {
                  "expr": "count()",
                  "alias": "cnt",
                  "order": 0,
                  "desc": true
                }
              ],
              "limit": 10,
              "datasource": "alarms"
            }
          ],
          "id": 0,
          "method": "query"
        }
      }
    ],
    "agv_fields": [
      {
        "group": 2,
        "name": "administrative_domain"
      },
      {
        "group": 0,
        "name": "ts"
      },
      {
        "group": 0,
        "name": "alarm_id"
      },
      {
        "group": 0,
        "name": "direct_services"
      },
      {
        "group": 0,
        "name": "direct_subscribers"
      },
      {
        "group": 0,
        "name": "escalation_ts"
      },
      {
        "group": 0,
        "name": "escalation_tt"
      },
      {
        "group": 1,
        "name": "managed_object"
      },
      {
        "group": 1,
        "name": "platform"
      },
      {
        "group": 1,
        "name": "profile"
      },
      {
        "group": 0,
        "name": "reopens"
      },
      {
        "group": 1,
        "name": "segment"
      },
      {
        "group": 0,
        "name": "severity",
        "description": "\u0412\u0430\u0436\u043d\u043e\u0441\u0442\u044c"
      },
      {
        "group": 0,
        "name": "total_objects"
      },
      {
        "group": 0,
        "name": "total_services"
      },
      {
        "group": 0,
        "name": "total_subscribers"
      },
      {
        "group": 1,
        "name": "version"
      },
      {
        "group": 1,
        "name": "vendor"
      },
      {
        "group": 1,
        "name": "ip"
      },
      {
        "group": 2,
        "name": "pool"
      },
      {
        "group": 0,
        "name": "date"
      },
      {
        "group": 1,
        "name": "container"
      },
      {
        "group": 0,
        "name": "close_ts"
      },
      {
        "group": 1,
        "name": "root"
      }
    ],
    "id": "5a18171d3d1c0464081689f2"
  },
  "id": 0,
  "error": null
}
